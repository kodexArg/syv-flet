# Fix Gaps Checklist - SyV-Flet Project
# Estado persistente para resoluciÃ³n recursiva de gaps tÃ©cnicos
# NO EDITAR MANUALMENTE - Gestionado por /fix-gaps skill

version: "1.0"
created_at: "2026-01-18T00:00:00Z"
last_updated: "2026-01-18T00:00:00Z"

progress:
  total: 15
  completed: 0
  pending: 15
  blocked: 3  # gaps con blocker: true

gaps:
  # ========================================
  # PRIORIDAD CRÃTICA (ðŸ”´) - Blockers
  # ========================================

  - id: GAP-001
    priority: critical
    category: dependencies
    title: "Agregar PyYAML a dependencias"
    status: pending
    blocker: true
    created_at: "2026-01-18T00:00:00Z"
    description: |
      pyproject.toml no incluye pyyaml en dependencies, pero es requerido
      para cargar configs.yaml. Sin esto, config_loader.py no puede funcionar.

    solution_spec: |
      1. Ejecutar: uv add pyyaml>=6.0.0
      2. Verificar lockfile: uv lock
      3. Validar import: python -c "import yaml; print(yaml.__version__)"
      4. Confirmar en pyproject.toml que aparece pyyaml>=6.0.0

    validation:
      - "import yaml funciona sin ModuleNotFoundError"
      - "uv.lock contiene pyyaml con versiÃ³n correcta"

    files_affected:
      - pyproject.toml
      - uv.lock

  - id: GAP-002
    priority: critical
    category: skills
    title: "Crear skill: combat-resolution"
    status: pending
    blocker: true
    created_at: "2026-01-18T00:00:00Z"
    description: |
      No existe especificaciÃ³n de cÃ³mo calcular fuerza en combate.
      PRD menciona "mayor fuerza gana, empate = estÃ¡tico" pero falta:
      - Algoritmo de cÃ¡lculo de fuerza
      - Modificadores de terreno
      - Flanking/support mechanics
      - ResoluciÃ³n de empates exacta

    solution_spec: |
      1. Crear .claude/skills/combat-resolution/SKILL.md
      2. Definir fuerza base por UnitType (Infantry, Officer, Captain)
      3. Especificar modificadores de terreno (plains, forest, hills, etc.)
      4. Documentar support mechanics (unidades adyacentes)
      5. Definir tie-breaking rules
      6. Crear tabla de ejemplos de combate
      7. Integrar con testing-framework (casos de prueba)
      8. Agregar allowed-tools si necesario

    validation:
      - "SKILL.md contiene algoritmo completo de fuerza"
      - "Ejemplos de combate cubren todos los casos edge"
      - "IntegraciÃ³n con state-machine documentada"

    files_affected:
      - .claude/skills/combat-resolution/SKILL.md
      - .claude/INDEX.md (agregar referencia)

  - id: GAP-003
    priority: critical
    category: skills
    title: "Crear skill: order-execution"
    status: pending
    blocker: true
    created_at: "2026-01-18T00:00:00Z"
    description: |
      No hay pipeline definido para ejecutar Ã³rdenes en EXECUTION phase.
      Preguntas sin respuesta:
      - Â¿Secuencial o paralelo?
      - Â¿Conflictos de destino? (dos unidades â†’ mismo hex)
      - Â¿Timing de animaciones?
      - Â¿CancelaciÃ³n de Ã³rdenes invÃ¡lidas?

    solution_spec: |
      1. Crear .claude/skills/order-execution/SKILL.md
      2. Definir orden de ejecuciÃ³n (recomendado: FIFO con priority hints)
      3. Resolver conflictos de destino (first-come o rollback)
      4. Especificar pipeline: Validate â†’ Execute â†’ Animate â†’ Commit
      5. Documentar cancelaciÃ³n automÃ¡tica (invalid moves post-validation)
      6. Integrar con state-machine (EXECUTION phase triggers)
      7. Integrar con animation-framework (timing sequences)
      8. Crear ejemplos de conflictos y resoluciÃ³n

    validation:
      - "Pipeline documentado con diagrama de flujo"
      - "Conflict resolution rules claras"
      - "Integration points con FSM definidos"

    files_affected:
      - .claude/skills/order-execution/SKILL.md
      - .claude/INDEX.md

  # ========================================
  # PRIORIDAD ALTA (ðŸŸ¡)
  # ========================================

  - id: GAP-004
    priority: high
    category: skills
    title: "Crear skill: five-hex-rule"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      Regla 5 HexÃ¡gonos mencionada en RESET phase pero algoritmo no especificado.
      Â¿CÃ³mo detectar unidades aisladas? Â¿BFS/DFS? Â¿QuÃ© distancia exactamente?

    solution_spec: |
      1. Crear .claude/skills/five-hex-rule/SKILL.md
      2. Definir algoritmo de conectividad (BFS recomendado)
      3. Especificar distancia exacta: 5 hexÃ¡gonos Manhattan
      4. Documentar cuÃ¡ndo ejecutar (RESET phase, post-execution)
      5. Casos edge: tablero vacÃ­o, islas mÃºltiples, unidades en bordes
      6. Integrar con state-machine (RESET phase logic)
      7. Crear ejemplos visuales (diagramas de conectividad)

    validation:
      - "Algoritmo BFS documentado con pseudo-cÃ³digo"
      - "Casos edge cubiertos con ejemplos"
      - "Integration con RESET phase clara"

    files_affected:
      - .claude/skills/five-hex-rule/SKILL.md
      - .claude/INDEX.md

  - id: GAP-005
    priority: high
    category: skills
    title: "Crear skill: animation-framework"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      No hay especificaciÃ³n de timing, easing, secuencias de animaciÃ³n.
      UI necesita transiciones definidas para polish profesional.

    solution_spec: |
      1. Crear .claude/skills/animation-framework/SKILL.md
      2. Definir duraciÃ³n de transiciones (recomendado: 200-500ms)
      3. Especificar easing functions (ease-in-out para UI, linear para movement)
      4. Documentar secuencias: PhaseTransition fade, unit movement, combat
      5. Definir FPS target: 60 desktop, 30 mobile
      6. Performance budget: max animation time per frame
      7. Integrar con ux-ui-flet-rendering
      8. Crear tabla de timing reference

    validation:
      - "Timing table completa con todos los tipos de animaciÃ³n"
      - "Easing functions documentadas con curvas"
      - "Performance budget claro"

    files_affected:
      - .claude/skills/animation-framework/SKILL.md
      - .claude/INDEX.md

  - id: GAP-006
    priority: high
    category: skills
    title: "Completar skill: logging"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      logging skill actual estÃ¡ al 30%. Solo dice "Loguru es el motor".
      Falta especificaciÃ³n de implementaciÃ³n real.
      logging_config.py existe pero no estÃ¡ documentado cÃ³mo integrarlo.

    solution_spec: |
      1. Editar .claude/skills/logging/SKILL.md
      2. Definir niveles: DEBUG, INFO, WARNING, ERROR, CRITICAL
      3. Especificar sinks: console (stderr), debug.log, error.log
      4. Documentar rotation: diaria, max 10MB, retenciÃ³n 7 dÃ­as
      5. Context injection: user_id, turn_number, game_phase
      6. Integrar logging_config.py con GameController
      7. Crear ejemplos de uso en diferentes mÃ³dulos
      8. Performance considerations: async logging

    validation:
      - "SecciÃ³n implementation completa en SKILL.md"
      - "Ejemplos de context injection documentados"
      - "Integration con logging_config.py explicada"

    files_affected:
      - .claude/skills/logging/SKILL.md

  # ========================================
  # PRIORIDAD MEDIA (ðŸŸ¢)
  # ========================================

  - id: GAP-007
    priority: medium
    category: skills
    title: "Crear skill: error-handling"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      No existe estrategia de manejo de errores.
      Â¿QuÃ© pasa con estados invÃ¡lidos, movimientos ilegales, Ã³rdenes conflictivas?

    solution_spec: |
      1. Crear .claude/skills/error-handling/SKILL.md
      2. Definir excepciones custom:
         - InvalidOrderError
         - IllegalMoveError
         - InvalidGameStateError
      3. Especificar recovery strategies (rollback, ignore, alert)
      4. Documentar validaciÃ³n en boundaries (user input, external events)
      5. Integrar con logging (ERROR level para exceptions)
      6. Crear error hierarchy diagram

    validation:
      - "Exception hierarchy documentada"
      - "Recovery strategies claras"
      - "Boundary validation especificada"

    files_affected:
      - .claude/skills/error-handling/SKILL.md
      - .claude/INDEX.md

  - id: GAP-008
    priority: medium
    category: architecture
    title: "Definir config initialization"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      Template example-config.yaml existe pero no hay spec de carga.
      Â¿CuÃ¡ndo se carga? Â¿ValidaciÃ³n? Â¿Path exacto de config_loader.py?

    solution_spec: |
      1. Documentar en configuration-management skill:
         - Path exacto: src/syv_flet/engine/config_loader.py
         - Orden de carga: env vars > configs.yaml > defaults
         - ValidaciÃ³n con Pydantic (Config model)
      2. Especificar error handling:
         - FileNotFoundError â†’ usar defaults + warning
         - YAMLError â†’ crash con mensaje claro
      3. Definir inicializaciÃ³n timing: antes de GameController.__init__
      4. Crear ejemplo de Config Pydantic model

    validation:
      - "Path de config_loader.py documentado"
      - "Orden de precedencia claro"
      - "Error handling especificado"

    files_affected:
      - .claude/skills/configuration-management/SKILL.md

  - id: GAP-009
    priority: medium
    category: ui
    title: "Especificar transition timing"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      PhaseTransitionScreen â†’ GameScreen: Â¿fade? Â¿instant?
      EXECUTION animations: Â¿simultÃ¡neas? Â¿secuenciales?

    solution_spec: |
      1. Documentar en ux-ui-flet-rendering skill:
         - Fade duration: 300ms (ease-in-out)
         - Overlay opacity: 0.95 â†’ 0.0 gradual
         - Button press: instant screen swap post-fade
      2. EXECUTION sequence timing:
         - All orders execute simultÃ¡neamente (parallel)
         - Animations staggered: 50ms offset entre unidades
      3. Integrar referencia a animation-framework skill

    validation:
      - "Durations especÃ­ficas documentadas"
      - "Sequence logic clara"

    files_affected:
      - .claude/skills/ux-ui-flet-rendering/SKILL.md

  - id: GAP-010
    priority: medium
    category: ui
    title: "Completar input feedback"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      Tap â†’ hex highlight definido, pero faltan:
      - Haptic feedback (mobile)
      - Audio cues
      - Error states visuales

    solution_spec: |
      1. Agregar a ux-ui-flet-rendering skill:
         - Haptic: light impact en tap vÃ¡lido, heavy en error
         - Audio: opcional, off por default (config toggle)
         - Error visual: red flash 200ms en hex invÃ¡lido
      2. Especificar intensidad haptic por plataforma
      3. Documentar accessibility considerations

    validation:
      - "Haptic patterns documentados"
      - "Error states visuales especificados"

    files_affected:
      - .claude/skills/ux-ui-flet-rendering/SKILL.md

  - id: GAP-011
    priority: medium
    category: ui
    title: "Definir loading states"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      Â¿QuÃ© muestra durante carga de assets?
      Â¿Progress bar? Â¿Splash screen?

    solution_spec: |
      1. Crear spec en ux-ui-flet-rendering:
         - Splash screen: logo centrado + progress bar
         - Progress: 0-100% basado en assets cargados
         - Timeout: 10s max, error message si excede
      2. Integrar con assets-manager (batch preload)
      3. Definir lazy loading fallback

    validation:
      - "Splash screen layout documentado"
      - "Progress tracking especificado"

    files_affected:
      - .claude/skills/ux-ui-flet-rendering/SKILL.md

  - id: GAP-012
    priority: medium
    category: ui
    title: "Completar order path visualization"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      Waypoints (max 3) mencionados pero visualizaciÃ³n incompleta.
      Â¿Flechas direccionales? Â¿Colores por tipo de orden?

    solution_spec: |
      1. Agregar a hex-grid-flet-rendering skill:
         - LÃ­nea: dashed para MOVEMENT, solid para ATTACK
         - Color por OrderType: blue (MOVE), red (ATTACK), green (DEPLOY)
         - Arrow heads en destino final
         - Waypoints: cÃ­rculos numerados (1, 2, 3)
      2. Crear tabla de visual styles por OrderType

    validation:
      - "Style table completa"
      - "Waypoint rendering documentado"

    files_affected:
      - .claude/skills/hex-grid-flet-rendering/SKILL.md

  # ========================================
  # PRIORIDAD BAJA (âšª) - Consistency
  # ========================================

  - id: GAP-013
    priority: low
    category: consistency
    title: "Resolver nomenclatura inconsistente"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      Mezcla de UPPERCASE (ScreenState.PHASE_TRANSITION) y PascalCase (PhaseTransitionScreen).
      Necesita regla clara.

    solution_spec: |
      1. Documentar en code-standards skill:
         - Enums: SCREAMING_SNAKE_CASE (ej: PHASE_TRANSITION)
         - Classes: PascalCase (ej: PhaseTransitionScreen)
         - Variables: snake_case
      2. Audit todos los skills para consistencia
      3. Crear tabla de nomenclatura reference

    validation:
      - "Regla documentada en code-standards"
      - "Skills auditados y consistentes"

    files_affected:
      - .claude/skills/code-standards/SKILL.md

  - id: GAP-014
    priority: low
    category: consistency
    title: "Explicitar opacity values en hex-grid-flet-rendering"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      "HIDDEN" mencionado sin especificar 0.0 explÃ­citamente.
      Debe sincronizarse con ux-ui-flet-rendering.

    solution_spec: |
      1. Agregar tabla de opacity en hex-grid-flet-rendering:
         - PLANNING own orders: 0.4
         - PLANNING opponent: 0.0 (HIDDEN)
         - EXECUTION all: 1.0
      2. Sincronizar con ux-ui-flet-rendering (ya tiene tabla)
      3. Cross-reference entre skills

    validation:
      - "Tabla de opacity agregada"
      - "Consistencia con ux-ui verificada"

    files_affected:
      - .claude/skills/hex-grid-flet-rendering/SKILL.md

  - id: GAP-015
    priority: low
    category: validation
    title: "Validar completitud de skills existentes"
    status: pending
    blocker: false
    created_at: "2026-01-18T00:00:00Z"
    description: |
      Revisar que todos los 13 skills tengan secciones completas:
      - DescripciÃ³n, ejemplos, quick reference, allowed-tools (si aplica)

    solution_spec: |
      1. Crear audit checklist:
         - âœ… Header con nombre, propÃ³sito
         - âœ… SecciÃ³n de ejemplos
         - âœ… Quick reference
         - âœ… Integration points
         - âœ… Allowed-tools (si es auto-invocable)
      2. Revisar cada skill contra checklist
      3. Completar secciones faltantes

    validation:
      - "Checklist aplicada a todos los skills"
      - "Gaps de completitud resueltos"

    files_affected:
      - .claude/skills/*/SKILL.md (mÃºltiples)

# ========================================
# Metadata de EjecuciÃ³n
# ========================================

execution_history: []
# Ejemplo de entrada futura:
# - gap_id: GAP-001
#   started_at: "2026-01-18T14:30:00Z"
#   completed_at: "2026-01-18T14:35:00Z"
#   status: success
#   feedback_path: ".claude/skills/fix-gaps/feedback.md#gap-001"
